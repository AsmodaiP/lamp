# Управляемый Фонарь

## Описание задания

Требовалось написать управляемый по сети фонарь. Команды фонарь должен принимать от сервера, к которому он подключается по TCP соединению.
Протокол управления фонарем заключается в том, что сервер передает команды в формате json вида:

```json
{
	"command": text
	"metadata": double
}
```

В начальной реализации должны поддерживаться следующие команды:

1. ON
2. OF
3. COLOR

## Описание проекта

Был реализован как сам фонарь, так и возможность запустить параллельно клиент и сервер и управлять фонарем из консоли или браузера.

## Запуск проекта

1. Склонируйте репозиторий

   ```bash
   git clone https://github.com/AsmodaiP/lamp
   ```
2. Перейдите в скачанный репозиторий

   ```bash
   cd lamp
   ```
3. Создайте виртуальное окружение

   ```bash
   python -m venv venv
   ```
4. Активируйте виртуальное окружение

   ```bash
   source venv/bin/activate
   ```
5. Установите зависимости

   ```bash
   pip install -r requirements.txt
   ```
6. Запустите сервер
   При любом варианте, можно указывать порт, на котором будет запущен сервер, с помощью флага `--port` и адрес, к которому будет подключаться фонарь с помощью флага `--host`

   1. Если вы хотите запустить фонарь как клиент, то запустите сервер

      ```bash
      python main.py
      ```
   2. Если вы хотите запустить фонарь как сервер, то запустите сервер с флагом `--cli-server`

      ```bash
      python main.py --cli-server
      ```
      После этого сервер будет ждать подключения фонаря.
      Его можно запустить с помощью команды выше, в таком случае следует оставить порт и адрес по умолчанию.

      После запуска фонаря, он подключится к серверу и начнет принимать команды.
      Команды можно писать в консоль, а также отправлять с помощью браузера по адресу `http://localhost:9999/`
      В консоль комманды можно отправлять в формате json, например:

      ```json
      {"command": "ON", "metadata": 0.5}
      ```

## Демонстрация работы 

![Image alt](https://raw.githubusercontent.com/AsmodaiP/lamp/master/static/media/animation.gif)